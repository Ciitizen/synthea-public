{
  "name": "Full Breast Cancer Exam",
  "remarks": [
    "A full battery of tests performed routinely during breast cancer treatment.",
    "This submodule must occur DURING AN ENCOUNTER. Includes: ",
    "1. Physical exam ",
    "2. Imaging ",
    "3. Labs + other procedures"
  ],
  "states": {

    "Initial": {
      "type": "Initial",
      "direct_transition": "Physical_Exam"
    },

    "Physical_Exam": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "5880005",
          "display": "Physical examination"
        }
      ],
      "duration": {
        "low": 20,
        "high": 40,
        "unit": "minutes"
      },
      "direct_transition": "CAT_Scan"
    },

    "CAT_Scan": {
      "type": "ImagingStudy",
      "remarks": [
        "On average a patient has 90 images each of the chest, abdomen, and pelvis.",
        "For now, only including 1 image instance in each series to caputure the ",
        "SOP code without duplicating the same data 90+ times for each series."
      ],
      "procedure_code": {
        "system": "SNOMED-CT",
        "code": "77477000",
        "display": "CAT scan"
      },
      "series": [
        {
          "body_site": {
            "system": "SNOMED-CT",
            "code": "51185008",
            "display": "Chest"
          },
          "modality": {
            "system": "DICOM-DCM",
            "code": "CT",
            "display": "Computed Tomography"
          },
          "instances": [
            {
              "title": "Image of chest",
              "sop_class": {
                "system": "DICOM-SOP",
                "code": "1.2.840.10008.5.1.4.1.1.2",
                "display": "CT Image Storage"
              }
            }
          ]
        },
        {
          "body_site": {
            "system": "SNOMED-CT",
            "code": "113345001",
            "display": "Abdomen"
          },
          "modality": {
            "system": "DICOM-DCM",
            "code": "CT",
            "display": "Computed Tomography"
          },
          "instances": [
            {
              "title": "Image of abdomen",
              "sop_class": {
                "system": "DICOM-SOP",
                "code": "1.2.840.10008.5.1.4.1.1.2",
                "display": "CT Image Storage"
              }
            }
          ]
        },
        {
          "body_site": {
            "system": "SNOMED-CT",
            "code": "12921003",
            "display": "Pelvis"
          },
          "modality": {
            "system": "DICOM-DCM",
            "code": "CT",
            "display": "Computed Tomography"
          },
          "instances": [
            {
              "title": "Image of pelvis",
              "sop_class": {
                "system": "DICOM-SOP",
                "code": "1.2.840.10008.5.1.4.1.1.2",
                "display": "CT Image Storage"
              }
            }
          ]
        }
      ],
      "direct_transition": "Blood_Cell_Count"
    },

    "Blood_Cell_Count": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "88308000",
          "display": "Blood cell count"
        }
      ],
      "direct_transition": "Measure_Red_Blood_Cell_Count"
    },

    "Measure_Red_Blood_Cell_Count": {
      "type": "Observation",
      "category": "vital-signs",
      "unit": "cells/uL",
      "codes": [
        {
          "system": "LOINC",
          "code": "26453-1",
          "display": "Erythrocytes [#/volume] in Blood"
        }
      ],
      "attribute": "red_blood_cell_count",
      "direct_transition": "Measure_White_Blood_Cell_Count"
    },

    "Measure_White_Blood_Cell_Count": {
      "type": "Observation",
      "category": "vital-signs",
      "unit": "cells/uL",
      "codes": [
        {
          "system": "LOINC",
          "code": "26464-8",
          "display": "Leukocytes [#/volume] in Blood"
        }
      ],
      "attribute": "white_blood_cell_count",
      "direct_transition": "Measure_Platelet_Count"
    },

    "Measure_Platelet_Count": {
      "type": "Observation",
      "category": "vital-signs",
      "unit": "cells/uL",
      "codes": [
        {
          "system": "LOINC",
          "code": "26515-7",
          "display": "Platelets [#/volume] in Blood"
        }
      ],
      "attribute": "platelet_blood_cell_count",
      "direct_transition": "Metabolic_Panel"
    },

    "Metabolic_Panel": {
      "type": "Procedure",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "165102003",
          "display": "Metabolic function test"
        }
      ],
      "direct_transition": "Metabolic_Panel_Observations"
    },

    "Metabolic_Panel_Observations": {
      "type": "Simple",
      "remarks": [
        "TODO: Record observations about the patient's metabolic panel"
      ],
      "direct_transition": "Terminal"
    },

    "Terminal": {
      "type": "Terminal"
    }
  }
}
